<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fechas de Cobro 2025</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card shadow">
                    <div class="card-header bg-primary text-white text-center">
                        <h1 class="mb-0">üóìÔ∏è Fechas de Cobro 2025</h1>
                        <p class="mb-0">Cronograma de pagos de sueldos</p>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-striped table-hover">
                                <thead class="table-dark">
                                    <tr>
                                        <th scope="col">Mes</th>
                                        <th scope="col">Fecha de Pago</th>
                                        <th scope="col">Tipo</th>
                                    </tr>
                                </thead>
                                <tbody id="payrollTable">
                                    <!-- Data will be populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                        <div class="mt-4">
                            <div class="alert alert-info" role="alert">
                                <h6 class="alert-heading">üìã Reglas de Pago:</h6>
                                <ul class="mb-0">
                                    <li><strong>Adelanto:</strong> Si el primer d√≠a h√°bil del mes siguiente es lunes, fin de semana o feriado, se paga el √∫ltimo d√≠a h√°bil del mes actual.</li>
                                    <li><strong>Fecha normal:</strong> Si el primer d√≠a h√°bil del mes siguiente es martes a viernes (no feriado), se paga ese mismo d√≠a.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>
        // Payroll calculation functions
        function isWeekend(date) {
            const day = date.getDay();
            return day === 0 || day === 6; // Sunday or Saturday
        }

        function isMonday(date) {
            return date.getDay() === 1;
        }

        function isSameDay(date1, date2) {
            return date1.getFullYear() === date2.getFullYear() &&
                   date1.getMonth() === date2.getMonth() &&
                   date1.getDate() === date2.getDate();
        }

        function isHoliday(date) {
            var holidays = [
                new Date(2024, 0, 1),
                new Date(2024, 2, 24),
                new Date(2024, 2, 28),
                new Date(2024, 2, 29),
                new Date(2024, 3, 2),
                new Date(2024, 4, 1),
                new Date(2024, 4, 25),
                new Date(2024, 5, 17),
                new Date(2024, 5, 20),
                new Date(2024, 6, 9),
                new Date(2024, 7, 17),
                new Date(2024, 9, 12),
                new Date(2024, 10, 20),
                new Date(2024, 11, 8),
                new Date(2024, 11, 24),
                new Date(2024, 11, 25),
                new Date(2024, 11, 31),
                new Date(2025, 0, 1),
                new Date(2025, 2, 3),
                new Date(2025, 2, 4),
                new Date(2025, 2, 24),
                new Date(2025, 3, 2),
                new Date(2025, 3, 17),
                new Date(2025, 3, 18),
                new Date(2025, 4, 1),
                new Date(2025, 4, 2),
                new Date(2025, 4, 25),
                new Date(2025, 5, 16),
                new Date(2025, 5, 20),
                new Date(2025, 6, 9),
                new Date(2025, 7, 15),
                new Date(2025, 7, 17),
                new Date(2025, 9, 10),
                new Date(2025, 10, 21),
                new Date(2025, 10, 24),
                new Date(2025, 11, 8),
                new Date(2025, 11, 24),
                new Date(2025, 11, 25),
                new Date(2025, 11, 31),
                new Date(2026, 0, 1),
            ];

            return holidays.some(holiday => isSameDay(date, holiday));
        }

        function isWeekendOrHoliday(date) {
            return isWeekend(date) || isHoliday(date);
        }

        function getFirstBusinessDayOfMonth(year, month) {
            let date = new Date(year, month, 1);

            while (isWeekend(date)) {
                date.setDate(date.getDate() + 1);
            }

            return date;
        }

        function getLastBusinessDayOfMonth(year, month) {
            let date = new Date(year, month + 1, 0);

            while (isWeekendOrHoliday(date)) {
                date.setDate(date.getDate() - 1);
            }

            return date;
        }

        function getPayDate(year, month) {
            const nextMonth = month === 11 ? 0 : month + 1;
            const nextYear = month === 11 ? year + 1 : year;
            const firstBusinessDayNextMonth = getFirstBusinessDayOfMonth(nextYear, nextMonth);

            if (isWeekendOrHoliday(firstBusinessDayNextMonth) || isMonday(firstBusinessDayNextMonth)) {
                return getLastBusinessDayOfMonth(year, month);
            } else {
                return firstBusinessDayNextMonth;
            }
        }

        function formatDate(date) {
            const day = String(date.getDate()).padStart(2, '0');
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const year = date.getFullYear();
            return `${day}/${month}/${year}`;
        }

        function getPayType(year, month) {
            const nextMonth = month === 11 ? 0 : month + 1;
            const nextYear = month === 11 ? year + 1 : year;
            const firstBusinessDayNextMonth = getFirstBusinessDayOfMonth(nextYear, nextMonth);

            if (isWeekendOrHoliday(firstBusinessDayNextMonth) || isMonday(firstBusinessDayNextMonth)) {
                return { type: 'Adelanto', class: 'text-warning' };
            } else {
                return { type: 'Normal', class: 'text-success' };
            }
        }

        // Populate the table
        function populatePayrollTable() {
            const tbody = document.getElementById('payrollTable');
            const months = [
                'Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio',
                'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'
            ];

            for (let month = 0; month < 12; month++) {
                const payDate = getPayDate(2025, month);
                const payType = getPayType(2025, month);

                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>${months[month]}</strong></td>
                    <td>${formatDate(payDate)}</td>
                    <td><span class="${payType.class}">${payType.type}</span></td>
                `;
                tbody.appendChild(row);
            }
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            populatePayrollTable();
        });
    </script>
</body>
</html>
